version: '3.3'
services:

  # a service to generate pa11y results. the dashboard consumes the report.json generated by this service.
  # docker-compose run --rm pa11y
  pa11y:
    image: outrigger/pa11y:dev
    container_name: pa11y
    command: bash -c "cd /code/pa11y && pa11y-ci --config /code/pa11y/config.json --json > report.json"
    volumes:
      - ./tests/pa11y/:/code/pa11y/
    cap_add:
      - SYS_ADMIN
